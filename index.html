<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notenrechner</title>
<style>
    body {
        font-family: Monaco, monospace;
        background-color: #111;
        color: #fff;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    .container {
        width: 80%;
        max-width: 600px;
        background-color: #333;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }
    table {
        width: 100%;
        margin-bottom: 20px;
        border-collapse: collapse;
    }
    table, th, td {
        border: 1px solid #555;
    }
    th, td {
        padding: 10px;
        text-align: center;
    }
    th {
        background-color: #444;
    }
    td input {
        width: 80%;
        padding: 5px;
        border: none;
        background-color: #555;
        color: #fff;
    }
    .btn {
        padding: 10px 20px;
        background-color: #777;
        border: none;
        color: #fff;
        cursor: pointer;
        border-radius: 4px;
    }
    .btn:hover {
        background-color: #999;
    }
</style>
</head>
<body>

<div class="container">
    <h1>Notenrechner</h1>

    <table id="grades-table">
        <thead>
            <tr>
                <th>Note</th>
                <th>Gewichtung (%)</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="number" min="1" max="6"></td>
                <td><input type="number" min="1" max="100"></td>
                <td><button class="btn" onclick="addRow()">+</button></td>
            </tr>
        </tbody>
    </table>

    <div>
        <button class="btn" onclick="calculateAverage()">Durchschnitt berechnen</button>
        <p>Durchschnitt: <span id="average">-</span></p>
    </div>

    <div>
        <h3>Gewünschten Durchschnitt berechnen</h3>
        <p>Gewünschter Durchschnitt: <input type="number" id="desired-average" min="1" max="6" step="0.1"></p>
        <p>Gewichtung des nächsten Tests (%): <input type="number" id="next-test-weight" min="1" max="100"></p>
        <button class="btn" onclick="calculateDesiredGrade()">Berechnen</button>
        <p>Benötigte Note im nächsten Test: <span id="desired-grade">-</span></p>
    </div>

</div>

<script>
    function addRow() {
        const table = document.getElementById('grades-table').getElementsByTagName('tbody')[0];
        const newRow = table.insertRow(-1);
        const cell1 = newRow.insertCell(0);
        const cell2 = newRow.insertCell(1);
        const cell3 = newRow.insertCell(2);
        cell1.innerHTML = '<input type="number" min="1" max="6">';
        cell2.innerHTML = '<input type="number" min="1" max="100">';
        cell3.innerHTML = '<button class="btn" onclick="deleteRow(this)">-</button>';
    }

    function deleteRow(btn) {
        const row = btn.parentNode.parentNode;
        if (row.parentNode.rows.length > 1) {
            row.parentNode.removeChild(row);
        } else {
            alert("Mindestens eine Zeile muss übrig bleiben.");
        }
    }

    function calculateAverage() {
        const table = document.getElementById('grades-table').getElementsByTagName('tbody')[0];
        let sum = 0;
        let totalWeight = 0;

        for (let i = 0; i < table.rows.length; i++) {
            const grade = parseFloat(table.rows[i].cells[0].getElementsByTagName('input')[0].value);
            const weight = parseFloat(table.rows[i].cells[1].getElementsByTagName('input')[0].value);

            if (!isNaN(grade) && !isNaN(weight)) {
                sum += (grade * weight);
                totalWeight += weight;
            }
        }

        if (totalWeight > 0) {
            const average = sum / totalWeight;
            document.getElementById('average').textContent = average.toFixed(2);
        } else {
            document.getElementById('average').textContent = '-';
        }
    }

    function calculateDesiredGrade() {
        const desiredAverage = parseFloat(document.getElementById('desired-average').value);
        const nextTestWeight = parseFloat(document.getElementById('next-test-weight').value);

        if (!isNaN(desiredAverage) && !isNaN(nextTestWeight)) {
            const currentWeight = 100 - nextTestWeight;
            const neededGrade = (desiredAverage * currentWeight + 6 * nextTestWeight) / 100;
            document.getElementById('desired-grade').textContent = neededGrade.toFixed(2);
        } else {
            document.getElementById('desired-grade').textContent = '-';
        }
    }
</script>

</body>
</html>
